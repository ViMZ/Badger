{{ form_start(form) }}
{{ form_widget(form.name) }}
{{ form_widget(form.description) }}
<ul class="steps" data-index="{{ form.steps|length > 0 ? form.steps|last.vars.name + 1 : 0 }}" data-prototype="{{ form_widget(form.steps.vars.prototype)|e('html_attr') }}">
	{% for step in form.steps %}
		<li>{{form_widget(step)}}</li>
	{% endfor %}
</ul>
<button type="button" class="add_item_link" data-collection-holder-class="steps">Ajouter une Ã©tape</button>
<button class="btn">{{ button_label|default('Save') }}</button>
{{ form_end(form) }}

<script>
	const addFormToCollection = (e) => {
const collectionHolder = document.querySelector('.' + e.currentTarget.dataset.collectionHolderClass);

const item = document.createElement('li');

item.innerHTML = collectionHolder.dataset.prototype.replace(/__name__/g, collectionHolder.dataset.index);

collectionHolder.appendChild(item);

collectionHolder.dataset.index ++;
};

document.querySelectorAll('.add_item_link').forEach(btn => {
btn.addEventListener("click", addFormToCollection)
});
</script>
