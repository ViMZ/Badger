{# Vars : 
    achievement : Entité contenant les données
    user: L'utilisateur actuel
 #}
<a class="text-5xl absolute inline-flex items-center my-5 py-2 pr-4 pl-3 transition-all rounded-lg text-black hover:bg-white hover:bg-opacity-50" href="{{ path('achievement_list') }}"><i class="fa-solid fa-arrow-left-long"></i></a>
<div class="p-2 m-20 rounded-full bg-emerald-300 shadow-md dark:bg-gray-800 dark:border-gray-700">
    <span class="flex align-center justify-center">
        <img class="rounded-t-lg w-52 border-amber-700" src="{{ asset('build/images/default_badge_icon.svg') }}" alt="" />
        {% if is_granted('ROLE_ADMIN') %}
            <a href="{{ path('achievement_edit', {'id': achievement.id}) }}">Editer</a>
        {% endif %}
    </span>
    <div class="p-5 text-center">
        <h5 class="h-12 mb-2 text-xl font-bold tracking-tight text-gray-900 dark:text-white">{{achievement.name}}</h5>
        <p class="mb-3 px-10 font-normal text-xs text-gray-700 dark:text-gray-400">
            {{achievement.description}}
        </p>
        {% if is_granted('ROLE_ADMIN') %}
            {% include "components/button_primary.html.twig" with {"type": "a", "url":path('achievement_delete', {'id': achievement.id}), "text": "Supprimer"} %}
        {% endif %}
    </div>
    <div class="mx-20 flex flex-wrap">
        {% for badge in achievement.badges %}
            {% for userAchievement in app.user.userAchievements %}
                {% if  userAchievement.achievement is same as(badge.achievement) %}
                    {% if userAchievement.step >= badge.step %}
                        <div class="flex flex-col flex-wrap justify-center text-center mx-2">
                            <div class="m-auto w-36">{{badge.name}}</div>
                            <a
                                class="m-auto flex flex-col justify-center align-middle bg-amber-500 p-10 w-52 h-52 rounded-full border-2 text-white border-amber-500 order-{{badge.step}} transition-all hover:text-white hover:border-white hover:shadow-xl"
                                style="background-image: url('/build/images/ribbon-badge-svgrepo-com.svg'); background-size: contain;"
                                href="{{path('badge_show', {'id': badge.id})}}"
                            >
                            </a>
                        </div>
                    {% else %}
                        <div class="grayscale flex flex-col flex-wrap justify-center text-center mx-2 ">
                            <div class="m-auto w-36">{{badge.name}}</div>
                            <a
                                class="m-auto flex flex-col justify-center align-middle bg-amber-500 p-10 w-52 h-52 rounded-full border-2 text-white border-amber-500 order-{{badge.step}} transition-all hover:text-white hover:border-white hover:shadow-xl"
                                style="background-image: url('/build/images/ribbon-badge-svgrepo-com.svg'); background-size: contain;"
                                href="{{path('badge_show', {'id': badge.id})}}"
                            >
                            </a>
                        </div>
                    {% endif %}
                {% endif %}
            {% endfor %}
        {% endfor %}
    </div>
</div>